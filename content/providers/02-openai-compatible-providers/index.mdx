---
title: OpenAI Compatible Providers
description: Use OpenAI compatible providers with the AI SDK.
---

# OpenAI Compatible Providers

You can use the [OpenAI Compatible Provider](https://www.npmjs.com/package/@ai-sdk/openai-compatible) package to use language model providers that implement the OpenAI API.
We provide detailed documentation for the following OpenAI compatible providers:

- [Perplexity](/providers/openai-compatible-providers/perplexity)
- [LM Studio](/providers/openai-compatible-providers/lmstudio)
- [Baseten](/providers/openai-compatible-providers/baseten)

The general setup and provider instance creation is the same for all OpenAI compatible providers.

## Setup

The OpenAI Compatible provider is available via the `@ai-sdk/openai-compatible` module. You can install it with:

<Tabs items={['pnpm', 'npm', 'yarn']}>
  <Tab>
    <Snippet text="pnpm add @ai-sdk/openai-compatible" dark />
  </Tab>
  <Tab>
    <Snippet text="npm install @ai-sdk/openai-compatible" dark />
  </Tab>
  <Tab>
    <Snippet text="yarn add @ai-sdk/openai-compatible" dark />
  </Tab>
</Tabs>

## Provider Instance

To use an OpenAI compatible provider, you can create a custom provider instance with the `createOpenAICompatible` function from `@ai-sdk/openai-compatible`:

```ts
import { createOpenAICompatible } from '@ai-sdk/openai-compatible';

const provider = createOpenAICompatible({
  name: 'provider-name',
  apiKey: process.env.PROVIDER_API_KEY ?? '',
  baseURL: 'https://api.provider.com/v1',
});
```

## Language Models

You can create provider models using a provider instance.
The first argument is the model id, e.g. `model-id`.

```ts
const model = provider('model-id');
```

### Example

You can use provider language models to generate text with the `generateText` function:

```ts
import { createOpenAICompatible } from '@ai-sdk/openai-compatible'
import { generateText } from 'ai'

const provider = createOpenAICompatible({
  name: 'provider-name',
  apiKey: process.env.PROVIDER_API_KEY ?? '',
  baseURL: 'https://api.provider.com/v1'
})

const { text } = await generateText({
  model: provider('model-id')
  prompt: 'Write a vegetarian lasagna recipe for 4 people.'
})
```

### Including model ids for auto-completion

```ts
import { createOpenAICompatible } from '@ai-sdk/openai-compatible';
import { generateText } from 'ai';

type ExampleChatModelIds =
  | 'meta-llama/Llama-3-70b-chat-hf'
  | 'meta-llama/Meta-Llama-3.1-8B-Instruct-Turbo'
  | (string & {});

type ExampleCompletionModelIds =
  | 'codellama/CodeLlama-34b-Instruct-hf'
  | 'Qwen/Qwen2.5-Coder-32B-Instruct'
  | (string & {});

type ExampleEmbeddingModelIds =
  | 'BAAI/bge-large-en-v1.5'
  | 'bert-base-uncased'
  | (string & {});

const model = createOpenAICompatible<
  ExampleChatModelIds,
  ExampleCompletionModelIds,
  ExampleEmbeddingModelIds
>({
  baseURL: 'https://api.example.com/v1',
  name: 'example',
  headers: {
    Authorization: `Bearer ${process.env.MY_API_KEY}`,
  },
});

// Subsequent calls to e.g. `model.chatModel` will auto-complete the model id
// from the list of `ExampleChatModelIds` while still allowing free-form
// strings as well.

const { text } = await generateText({
  model: model.chatModel('meta-llama/Llama-3-70b-chat-hf'),
  prompt: 'Write a vegetarian lasagna recipe for 4 people.',
});
```

## Creating a Third-Party Provider Package

You can create your own provider package that leverages the OpenAI Compatible package. Publishing your provider package to [npm](https://www.npmjs.com/) can give users an easy way to use the provider's models and stay up to date with any changes you may have. Here's an example structure:

### File Structure

```bash
packages/example/
|-- src/
|   |-- example-chat-settings.ts      # Chat model types and settings
|   |-- example-completion-settings.ts # Completion model types and settings
|   |-- example-embedding-settings.ts  # Embedding model types and settings
|   |-- example-provider.ts           # Main provider implementation
|   |-- example-provider.test.ts      # Provider tests
|   `-- index.ts                      # Public exports
|-- package.json
|-- tsconfig.json
|-- tsup.config.ts                    # Build configuration
`-- README.md
```

### Key Files

1. **example-chat-settings.ts** - Define chat model IDs and settings:

```ts
import { OpenAICompatibleChatSettings } from '@ai-sdk/openai-compatible';

export type ExampleChatModelId =
  | 'example/chat-model-1'
  | 'example/chat-model-2'
  | (string & {});

export interface ExampleChatSettings extends OpenAICompatibleChatSettings {}
```

2. **example-provider.ts** - Main provider implementation:

```ts
import { OpenAICompatibleChatLanguageModel } from '@ai-sdk/openai-compatible';
import { loadApiKey } from '@ai-sdk/provider-utils';

export interface ExampleProviderSettings {
  apiKey?: string;
  baseURL?: string;
  headers?: Record<string, string>;
}

export function createExample(options: ExampleProviderSettings = {}) {
  const baseURL = options.baseURL ?? 'https://api.example.com/v1';
  const getHeaders = () => ({
    Authorization: `Bearer ${loadApiKey({
      apiKey: options.apiKey,
      environmentVariableName: 'EXAMPLE_API_KEY',
      description: 'Example API key',
    })}`,
    ...options.headers,
  });

  // Create provider instance with chat, completion, and embedding models
  const provider = (modelId, settings = {}) => {
    return new OpenAICompatibleChatLanguageModel(modelId, settings, {
      provider: 'example.chat',
      url: ({ path }) => `${baseURL}${path}`,
      headers: getHeaders,
    });
  };

  return provider;
}

// Export default instance
export const example = createExample();
```

3. **index.ts** - Public exports:

```ts
export { createExample, example } from './example-provider';
export type {
  ExampleProvider,
  ExampleProviderSettings,
} from './example-provider';
```

4. **package.json** - Package configuration:

```js
{
  "name": "@ai-sdk/example",
  "version": "0.0.1",
  "dependencies": {
    "@ai-sdk/openai-compatible": "^0.0.7",
    "@ai-sdk/provider": "^1.0.2",
    "@ai-sdk/provider-utils": "^2.0.4"
  }
}
```

### Usage

Once published, users can use your provider like this:

```ts
import { example } from '@ai-sdk/example';
import { generateText } from 'ai';

const { text } = await generateText({
  model: example('example/chat-model-1'),
  prompt: 'Hello, how are you?',
});
```

This structure provides a clean, type-safe implementation that leverages the OpenAI Compatible package while maintaining consistency with the usage of other AI SDK providers.
